# 可能是我的第一个能够用的项目

# 简单的计算器

## 使用说明

及其简单，不必多说

可以用按钮来点击输入字符

也可以直接在输入框输入

然后按等于号出结果

## 开发过程

在国庆假期花了3天时间速成了一点点有关Qt图形界面框架的知识

中途由于爷爷生病回了一趟家

回来之后开始肝计算器

一开始整体架构的思考花了蛮长时间，

担心功能，界面加上去之后会对整体造成很大改动

当然空想，不打码，还真的不容易判断自己的架构是否合理，所以就上手先肝了

AbstractButton类还有AbstractPanel类的设计是一开始先肝的时候发现有问题，于是就加了上去，并且让具体的Button和Panel继承于上面提到的基类（不然代码重用就太恐怖了）

关于Qt信号和槽机制，这个机制真的特别好用，我原本担心的按钮与文本框之间可能存在的强耦合很好地得到了解决，算是尝到了松耦合的甜头。

还有表达式分析引擎，这里刚好想起了以前看过的一个设计模式：单例模式，感觉ok。毕竟一个计算器的确是只使用一个引擎嘛，也算是拿设计模式练练手（以后加功能的时候可能就真的需要多个不同的引擎，并且需要通过按钮的交互改变表达式分析引擎）

## 项目可改进地方

1. UI：
   1. 按钮太丑，调一下大小，位置
   2. 有一个问题，按钮按的时间较长，可能会相当于按两次按钮（暂不清楚原因，可能是Qt框架自己的问题？也可能是有参数可以调节这样的问题，我还没有发现）
2. 异常处理
   1. 暂时没有给计算器加上判断输入是否合法的功能
   2. 如果输入异常可能会宕机
   3. 没有处理除数是0的情况
3. 表达式分析引擎：
   1. 自己写了一个，不过是需要用到递归的，可能会爆栈
   2. 考虑可以添加基于中缀表达式和后缀表达式的计算引擎，引擎是很容易更换的。
   3. 需要给引擎加一些可修改的参数，来实现改变计算精度等功能
4. 功能：功能真的有点少



## 未来展望

1. 强化表达式分析引擎
   1. 添加中缀表达式到后缀/前缀表达式的转换器
   2. 添加后缀表达式计算器
2. 使用编译原理相关知识进一步强化表达式分析引擎
   1. 词法分析+语法分析+语义分析
   2. 目标：能够报出准确的错误消息
3. 功能
   1. 添加：科学计算一栏
   2. 添加：自定义函数
   3. 添加：计算的历史记录
4. 菜单栏
   1. 使用基于QMainWindow类的窗口，并增加菜单栏
   2. 添加另一个页面：科学计算器